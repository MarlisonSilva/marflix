<!DOCTYPE html>
{% extends "layout/layout.html" %}
{% block content %}
<h1 style="color: white; margin-top: 32px;">Marflix</h1>
<div class="list-movies" style="display: flex; flex-direction: row;">
    {% for movie in movies %}
        <a href="#" class="open_modal poster poster-content" data-target="#modal{{ forloop.counter }}" style="width: 200px;">
            <img src="{{ movie.poster_url }}" alt="Capa" />
            <span class="mt-3">{{ movie.title }}</span>
        </a>
        
        
        <div id="modal{{ forloop.counter }}" class="modal hidden">
            <div style="display: grid; grid-template-columns: 1fr 1fr; position: absolute; width: 100%; height: 100%; ">
                <div style="color: white; margin: 20px;">
                    <h1 style="margin-top: 30px;">{{ movie.title }}</h1>
                    <p>{{ movie.synopsis }}</p>
                    <div class="about-media">
                        <h4>GÃªneros</h4>
                        <p>{% for m in movie.genre %}
                            {{ m }}
                        {% endfor %}</p>
                        <h4>Diretor</h4>
                        <p>{{ movie.director }}</p>
                    </div>
                    <p></p>
                    <p>{{ movie.language }}</p>
                    <p>{{ movie.average_rating }}</p>
                    <p>{{ movie.user }}</p>
                    <p>{{ movie.created_at }}</p>
                    
                </div>
                <div style="height: 100%; width: 100%;">
                    <div alt="Capa" style="background-image: url('{{ movie.cover_url }}'); box-shadow: inset 20px -20px 30px 10px rgba(0, 0, 0); width: 100%; height: 50%; background-size: cover; background-position: center;"></div>
                    <div style="position: relative; top: 0; height: 50%;">
                        <div class="details-media" style="text-align: center; color: rgba(255, 255, 255, 0.9);">
                            <span>{% if movie.age_rating == "0" %}L{% else %}{{ movie.age_rating }}{% endif %}</span>
                            <span>{{ movie.release_year }}</span>
                            <span>{{ movie.duration }}m</span>
                        </div>
                        <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; position: absolute; width: 100%; height: calc(100% - 1rem - 2px)">
                            <a href="{{ movie.movie_url }}" class="btn-watch">ASSISTIR</a>
                        </div>
                    </div>
                </div>
            </div>
            <span class="close_modal"><i style="font-size: 22px;" class="bi bi-x-lg"></i></span>
        </div>  
    {% endfor %}
</div>  
{% endblock %}